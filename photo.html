<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Photo Archive</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="photo.css">
</head>
<body>
  <header class="photo-hero">
    <a href="index.html" class="home-button">Back Home</a>
    <p class="eyebrow">Personal work</p>
    <h1>Photo Archive</h1>
    <p class="hero-copy">
      A living catalog of digital and 35mm film frames. Use the filters below to jump between cameras
      or view everything at once.
    </p>
  </header>

  <main class="photo-main">
    <section class="gallery-controls">
      <p class="controls-label">Filter by capture method</p>
      <div class="filter-buttons">
        <button type="button" data-filter="all" class="filter-button active">All Photos</button>
        <button type="button" data-filter="digital-nikon" class="filter-button">Nikon DSLR</button>
        <button type="button" data-filter="film-35mm" class="filter-button">35mm Film</button>
      </div>
    </section>

    <section class="gallery-grid" id="gallery" aria-live="polite"></section>
  </main>

  <div id="modal" class="modal" aria-hidden="true">
    <button id="closeModal" class="close-btn" aria-label="Close gallery">&times;</button>
    <button id="prevPhoto" class="nav-arrow left" aria-label="Previous photo">&#8249;</button>
    <figure class="modal-frame">
      <img id="modalImage" class="modal-content" alt="">
      <figcaption id="modalCaption"></figcaption>
    </figure>
    <button id="nextPhoto" class="nav-arrow right" aria-label="Next photo">&#8250;</button>
  </div>

  photos/digital/nikon/botanswaterfall.jpg
  <script>
    const photos = [
      { src: 'photos/digital/nikon/DSC_0004.jpg', alt: 'DSC_0004', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/DSC_0029.jpg', alt: 'DSC_0029', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/DSC_0046.jpg', alt: 'DSC_0046', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/DSC_0118.JPG', alt: 'DSC_0118', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/botanswaterfall.jpg', alt: 'botanswaterfall', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/bridge.jpg', alt: 'bridge', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/bridgelong.jpg', alt: 'bridgelong', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/door.jpg', alt: 'door', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/field.jpg', alt: 'field', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/futurepool.jpg', alt: 'futurepool', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/jail.jpg', alt: 'jail', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/kors.jpg', alt: 'kors', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/modern.jpg', alt: 'modern', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/riverflow.jpg', alt: 'riverflow', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/roofcorner.jpg', alt: 'roofcorner', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/structure.jpg', alt: 'structure', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/tree.jpg', alt: 'tree', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/views.jpg', alt: 'views', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/digital/nikon/wierdbuilding.jpg', alt: 'wierdbuilding', camera: 'Nikon DSLR', film: 'Digital Sensor', group: 'digital-nikon' },
      { src: 'photos/film/35mm/IMG_3348.jpg', alt: 'IMG_3348', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3352.jpg', alt: 'IMG_3352', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3354.jpg', alt: 'IMG_3354', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3356.jpg', alt: 'IMG_3356', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3359.jpg', alt: 'IMG_3359', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3361.jpg', alt: 'IMG_3361', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3363.jpg', alt: 'IMG_3363', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3365.jpg', alt: 'IMG_3365', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3369.jpg', alt: 'IMG_3369', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3370.jpg', alt: 'IMG_3370', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3371.jpg', alt: 'IMG_3371', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3372.jpg', alt: 'IMG_3372', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3376.jpg', alt: 'IMG_3376', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/IMG_3383.jpg', alt: 'IMG_3383', camera: '35mm Film', film: 'Kodak Ektar 100', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430001.JPG', alt: '99430001', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430003.JPG', alt: '99430003', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430004.jpeg', alt: '99430004', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430007.JPG', alt: '99430007', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430009.JPG', alt: '99430009', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430010.JPG', alt: '99430010', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/994300123.JPG', alt: '994300123', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430014.JPG', alt: '99430014', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430018.JPG', alt: '99430018', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430020.JPG', alt: '99430020', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430023.JPG', alt: '99430023', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430024.JPG', alt: '99430024', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430025.JPG', alt: '99430025', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430027.JPG', alt: '99430027', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/99430028.JPG', alt: '99430028', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/frame42.jpg', alt: 'frame42', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/frame44.jpg', alt: 'frame44', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/frame45.jpg', alt: 'frame45', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/frame48.jpg', alt: 'frame48', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/frame49.jpg', alt: 'frame49', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/frame50.jpg', alt: 'frame50', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/frame51.jpg', alt: 'frame51', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/frame52.jpg', alt: 'frame52', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/img20251108_00194853.jpg', alt: 'img20251108_00194853', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/img20251108_00194867.jpg', alt: 'img20251108_00194867', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/img20251108_00194884.jpg', alt: 'img20251108_00194884', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/img20251108_00194895.jpg', alt: 'img20251108_00194895', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' },
      { src: 'photos/film/35mm/img20251108_00194900.jpg', alt: 'img20251108_00194900', camera: '35mm Film', film: 'Kodak 400 TX', group: 'film-35mm' }
    ];

    const gallery = document.getElementById('gallery');
    const modal = document.getElementById('modal');
    const modalImage = document.getElementById('modalImage');
    const modalCaption = document.getElementById('modalCaption');
    const closeModalBtn = document.getElementById('closeModal');
    const prevPhotoBtn = document.getElementById('prevPhoto');
    const nextPhotoBtn = document.getElementById('nextPhoto');
    const filterButtons = document.querySelectorAll('[data-filter]');

    let activeFilter = 'all';
    let visibleIndices = [];
    let currentVisiblePosition = null;

    function renderGallery(filter = 'all') {
      activeFilter = filter;
      gallery.innerHTML = '';
      visibleIndices = [];

      photos.forEach((photo, index) => {
        if (filter === 'all' || photo.group === filter) {
          visibleIndices.push(index);

          const article = document.createElement('article');
          article.className = 'gallery-item';
          article.innerHTML = `
            <button class="gallery-thumb" data-index="${index}" aria-label="View ${photo.alt}">
              <img src="${photo.src}" alt="${photo.alt}">
            </button>
            <div class="gallery-meta">
              <p class="camera-label">${photo.camera}</p>
              <p class="film-label">${photo.film}</p>
            </div>
          `;
          gallery.appendChild(article);
        }
      });

      filterButtons.forEach((button) => {
        button.classList.toggle('active', button.dataset.filter === filter);
      });

      gallery.dataset.empty = visibleIndices.length === 0;
    }

    function updateModal(photoIndex) {
      const photo = photos[photoIndex];
      modalImage.src = photo.src;
      modalImage.alt = photo.alt;
      modalCaption.textContent = `${photo.camera} â€¢ ${photo.film}`;
    }

    function openModal(photoIndex) {
      updateModal(photoIndex);
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
      document.body.classList.add('modal-open');
      if (!visibleIndices.length) {
        currentVisiblePosition = null;
        return;
      }
      const position = visibleIndices.indexOf(photoIndex);
      currentVisiblePosition = position === -1 ? 0 : position;
    }

    function closeModal() {
      modal.classList.remove('open');
      modal.setAttribute('aria-hidden', 'true');
      document.body.classList.remove('modal-open');
      modalImage.src = '';
      currentVisiblePosition = null;
    }

    function showRelative(step) {
      if (!visibleIndices.length) return;
      if (currentVisiblePosition === null) currentVisiblePosition = 0;
      currentVisiblePosition = (currentVisiblePosition + step + visibleIndices.length) % visibleIndices.length;
      updateModal(visibleIndices[currentVisiblePosition]);
    }

    gallery.addEventListener('click', (event) => {
      const targetButton = event.target.closest('.gallery-thumb');
      if (!targetButton) return;
      const photoIndex = Number(targetButton.dataset.index);
      openModal(photoIndex);
    });

    closeModalBtn.addEventListener('click', closeModal);
    prevPhotoBtn.addEventListener('click', () => showRelative(-1));
    nextPhotoBtn.addEventListener('click', () => showRelative(1));

    modal.addEventListener('click', (event) => {
      if (event.target === modal) {
        closeModal();
      }
    });

    document.addEventListener('keydown', (event) => {
      if (!modal.classList.contains('open')) return;
      if (event.key === 'Escape') {
        closeModal();
      } else if (event.key === 'ArrowLeft') {
        showRelative(-1);
      } else if (event.key === 'ArrowRight') {
        showRelative(1);
      }
    });

    filterButtons.forEach((button) => {
      button.addEventListener('click', () => {
        const nextFilter = button.dataset.filter;
        if (modal.classList.contains('open')) {
          closeModal();
        }
        if (nextFilter !== activeFilter) {
          renderGallery(nextFilter);
        }
      });
    });

    renderGallery();
  </script>
</body>
</html>
